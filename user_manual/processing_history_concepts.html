

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Processing History Concepts &mdash; MsPASS 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />  

  <style>
    .wy-nav-content { max-width: 1600px; }
  </style>

  
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> MsPASS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user_manual.html">User’s Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_manual.html">Reference Manual</a></li>
</ul>

            
          
    <a href= "../genindex.html">Index</a>
  
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MsPASS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Processing History Concepts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/user_manual/processing_history_concepts.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="processing-history-concepts">
<span id="history-concepts"></span><h1>Processing History Concepts<a class="headerlink" href="#processing-history-concepts" title="Permalink to this headline">¶</a></h1>
<div class="section" id="global-versus-object-level-history">
<h2>Global versus object level history<a class="headerlink" href="#global-versus-object-level-history" title="Permalink to this headline">¶</a></h2>
<p>The mechanism we use to preserve processing history in MsPASS makes an
assumption that the workflow can be broken down into a series of
black boxes (algorithms) that input one or more atomic data objects and emit
one more (potentially different) <em>atomic data objects</em>. MsPASS currently defines
two object types as atomic:  Seismogram and TimeSeries.  By <em>atomic</em> we mean
they are indivisible.  This is in contrast to <em>Ensemble</em> objects that are
collections of atomic objects grouped by an unspecified method.</p>
<p>With this conceptual model (the concept behind this design),
preserving processing history has two components.</p>
<ol class="arabic simple">
<li><p><em>Global history</em> is the list of <em>unique definitions</em> of algorithms used
in a workflow.   The <em>unique</em> qualifier is necessary because most
algorithms have one to thousands of numbers/strings that define a unique
behavior.   To keep he discuss concise in this document we define a
<em>parameter</em> as data used by an algorithm that is NOT one of the the atomic
data to MsPASS.   A parameter can thus be something as simple as a
single integer or real number, or as elaborate as any python object (e.g.
a dict or list container).  We assume the behavior of a particular algorithm
can be uniquely defined by unique name assigned to the algorithm and
a particular set of parameters used to control it’s behavior.   The
simplest example is a function call with the algorithm set to the name
of the function and the parameters as a set of simple real and integer
inputs.   More complicated examples may require some more elaborate recipe
with hierarchies and/or auxiliary data inputs.   The conceptual model
here puts not restriction on what the parameters are but treat that as
an implementation detail.  Any algorithm that aims to preserve processing
history must define a mechanism to load and store the parameters that
define a unique instance of that algorithm.</p></li>
<li><p><em>Object level history</em>.  To fully recreate the processing history of a
processed data set one needs to retain the chain of processes that operated
on what data to produce the final output.  In every seismic reflection processing
system we are aware of the problem is reduced to what we are calling global
history.   Traditional labels displayed the chain of processing modules
applied to produce a final stacked section on a side bar on paper plots.
Digital forms largely replicated that model as a button to display the same
information on a screen.  In designing MsPASS we recognized there was a need
for object level history from at least two sources:  (1) python is a much
richer language than traditional, custom job control languages used by
processing packages and (2) some machine learning algorithms are iterative
at the object level.   On the other hand, although the need object-level history
is clear a naive implementation is potentially problematic in two
ways:  (1) memory bloat, and (2) performance.  We created a mechanism for
preserving object level history that is lightweight by preserving
only the minimum information needed to reconstruct a tree structure that
defines that tree.  We made the mechanism fast by implementing the
mechanism in C++ using an std::multimap container for which insertion
is about as fast as possible.  The user interface hides the implementation
details.   You as a user need only consult the API references to a
object we call <em>mspass.ProcessingHistory</em>.     (NEED A LINK HERE TO python
documentation)  User’s need only recognize that <em>Seismogram</em> and <em>TimeSeries</em>
objects (THESE ALSO NEED TO BE LINKS TO PYTHON API PAGES) have a
ProcessingHistory component.  Algorithms can and should at least allow
the option of registering themselves through this mechanism.   All
algorithms supported in MsPASS have an option to enable object level
history.   NEED A FEW MORE SENTENCES HERE WITH A LINK TO PAGE WITH THE TOPIC
OF WRITING YOUR OWN PROCESSING MODULE EXTENSION.  THAT DOCUMENT CAN AND
SHOULD CONTAIN A SECTION ON HOW TO SET UP THE HISTORY MECHANISM.</p></li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Ian Wang.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>